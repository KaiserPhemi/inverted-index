<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>{
	/**
	* @class
	*/
	class InvertedIndex{

		/** Class Constructor */
		constructor(){

			this.allIndices = {};
		}

		/** Reads the data from the file being uploaded */
 		readFile(file){
			this.file = file;
			let uploadedDoc = document.getElementsByClassName('file-upload');
			uploadedDoc.addEventListener('change', () => {
				Array.prototype.forEach.call(uploadedDoc.files, (file) =>{
					let reader = new FileReader();
					reader.addEventListener('load', () =>{
						if (this.validateFile(file)) {
							this.allIndices[fileName] = file; 
						}
					});
					reader.readAsText(file);
				});
			});
			console.log(documentList);
			return documentList;
		}

		/** Ensures all the documents in a particular file is valid */
		validateFile(file){
			this.file = file;
			let checkField,
				isValid = true;
			try{
				const parsedJSON = JSON.parse(JSON.stringify(this.file));
				isValid = (parsedJSON.length === 0) ? false : checkField;
				
				checkField = parsedJSON.forEach((key) => {
					isValid = (typeof key.title !== 'string' || typeof key.text !== 'string') ? false : true;
				});
			}
			catch(error){
				isValid = false;
			}
			return isValid;
		}
		
		/** Strips out special characters from documents to be indexed */
		tokenize(text){
			this.text = text;
			return this.text
					.toLowerCase()				// Converts text to lower case
					.replace(/[^\w\s]/g, '')	// Removes any non-word character e.g. dot
					.split(/\s+/)
					.sort();				// Turns it into an array
		}
		
		/** Creates the index for documents */
		createIndex(fileName, content){
			const fileIndex = {};

			content.forEach((objDoc, index) =>{
				for(const key in objDoc) {
					const tokens = this.tokenize(objDoc[key]);

					tokens.forEach((badge) => {
						if (fileIndex[badge]){								// Badge exist in fileIndex
							if (fileIndex[badge].indexOf(index) === -1) {	// Checks for unique index
								fileIndex[badge].push(index);
							}
						} else{
							fileIndex[badge] = [index];
						}
					});
				}
			});
			this.allIndices[fileName] = {words:fileIndex, count:content.length};
			return this.allIndices[fileName];
		}

		/** Getâ€™s indices created for particular files */
		getIndex(fileName){

			return this.allIndices[fileName];
		}

		/** Searches through one or more indices for words */
		searchIndex(fileName, query){
			const queryTokens = this.tokenize(query),
				  index 	  = this.getIndex(fileName);
			
			if (!index) {
				return `Index with ${fileName} does not exist`;
			}

			let searchResult = {
				words:{},
				docCount: index.docCount
			};

			queryTokens.forEach((token) => {
				if (index.words[token]) {
					searchResult.words[token] = index.words[tokens];
				}
			});

			return Object.keys(searchResult.words).length > 0 ? searchResult : 'No word found';
		}
	}

	/** App exported as Node package */
	module.exports = InvertedIndex;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="InvertedIndex.html">InvertedIndex</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Mar 22 2017 10:49:28 GMT+0100 (WAT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
