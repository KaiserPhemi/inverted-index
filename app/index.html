<!DOCTYPE html>
<html lang="en">
	
	<!--Contains site metadata and links-->
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>An Inverted Index App</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/index.css">
		
	</head>
	
	<!--Visible part of page-->
	<body ng-app="mainApp" ng-controller="MainController"> 

		<!--Navigation bar-->
		<nav class="navbar navbar-inverse navbar-light bg-faded main-nav shadow bg-color">
			
			<!--Page heading-->
			<span>
				<h3 class="page-heading"><a href="index.html">Inverted Index App </a></h3>
			</span>

            <!-- Navigation links -->
			<div class="container">
				
				<!-- Hamburger menu for links -->
				<div class="navbar-header">
            		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".main-links" aria-expanded="false">
		                <span class="sr-only">Toggle navigation</span>
		                <span class="icon-bar"></span>
		                <span class="icon-bar"></span>
		                <span class="icon-bar"></span>
            		</button>
        		</div>

				<!--Navigation-->
				<div class="collapse navbar-collapse">
					<ul class="navbar-nav navbar-right main-links nav-pills">
					  <li><a href="#" data-toggle="modal" data-target="#aboutMessage">About App</a></li>
					  <li><a href="#" data-toggle="modal" data-target="#helpMessage">Help</a></li>
					</ul>
				</div>

                <!-- About modal -->
                <div class="modal fade" id="aboutMessage" role="dialog" aria-hidden="true">
                    <div class="modal-dialog" >
                        <div class="modal-content">
                            
                            <!-- Modal Header -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">About App</h4>
                            </div>

                            <!-- Modal Body -->
                            <div class="modal-body">
                                <h4>Inverted Index</h4>
                                <p>An Inverted Index is an Index Data Structure storing a mapping from content to location (i.e. a mapping of words or numbers to it's location in a database file).
                                This Data Structure is widely used in several scenarios e.g. Cell Phone Lookup (where you have a phonebook which several contacts and you type in a person's number which in turn brings out the contact details of the person associated with that number).</p>
                                <p>This application builds an index from books in a file and allows you search through the file for words in that book according to the description <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/inverted-index.html" target="_blank"><b>here</b></a>. Also, the application will allow users upload a JSON file with this <a href="https://gist.github.com/q-ode/72019451b98f079a8d737eb7a412bf14" target="_blank"><b>structure.</b></a></p>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="close btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>                        
                    </div>
                </div>

                <!-- Help modal -->
                <div class="modal fade" id="helpMessage">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            
                            <!-- Modal Header -->
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Help</h4>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <h4>How to use</h4>
                                <ul>
                                	<li>Click <b>Upload File</b> button to upload valid json file</li>
                                	<li>Click <b>Create Index</b> button to create index of words from the file</li>
                                	<li>Enter a search query in the search box and click <b>Search Index</b> to search for a particular word.</li>
                                </ul>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">
                                <button type="button" class="close btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>                  
			</div>
		</nav>

		<!-- Upload, create-index and Search Bar -->
		<div class="container control-wrapper shadow bg-color" >
				
				<!-- Upload section -->
				<div class="btn btn-primary upload">
					<span class="btn-upload">Upload File</span>
					<input type="file" class="file-upload" accept=".json" name="files[]" ng-submit="fileUpload()" id="all-files" multiple>
				</div>

				<!-- Create index bar -->
				<div class="create-index-wrapper">
				    <select type="text" name="fileList" id="file-list"></select>
				    <button class="create-index btn btn-color" ng-click="createIndex()">Create Index</button>
				</div>

				<!-- Search Box -->
				<form class="search-form pull-right">
					<input class="search" type="text" placeholder="Type here">
					<input class="btn submit btn-color" type="submit" value="Search Index" ng-submit="invIndex.searchIndex()">
				</form>
		</div>

		<!-- Output section -->
		<div class="container main-section shadow bg-color" ng-controller="TableController">
			
			<!-- Output table -->
			<table>
			  <tr ng-repeat="out in indexTable" ng-model="tableMsg">
			  {{tableMsg}}
			  	
			  </tr>
			</table>
			</div>
		</div>
		

		<!--Shared scripts-->
		<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.6.2/angular.min.js'></script>
		<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<!--Custom scripts-->
		<script src="js/app.js"></script>
		<script src="js/mainModule.js"></script>
	</body>
</html>